<div class="box">
By creating a public profile, you can help inspire new people to join 80k. Seeing example members is a really effective way to persuade others to join. You can also make yourself known to our community, which might lead to connections with other effect altruists.
</div>

<div class="box">
  <h1><%= current_user.name %></h1>

  <% if current_user.member %>
    <% if current_user.member.confirmed %>
      <div class="box">
        <h2>Public profile</h2>
        <p>See how others view your profile on the <%= link_to "public profile for #{current_user.name}", "/members/#{current_user.slug}" %>.</p>
      </div>
    <% else %>
      <div class="box warning">
        <h2>Please note:</h2>
        <p>Your membership is still being reviewed by the 80,000 Hours team.</p>
        <p>You can fill in your profile details, but this will not be publicly visible until we accept your membership.</p>
        <p>If it's been more than a week and we haven't been in touch, please contact <%= link_to 'info@80000hours.org', 'mailto:info@80000hours.org' %>.</p>
      </div>
    <% end %>
  <% end %>

  <div class="box">
    <h2>Markdown</h2>
    <p>All the text fields can be formatted using the <a href="http://daringfireball.net/projects/markdown/syntax">Markdown syntax</a>. For example:</p>
    <p>**bold text** == <strong>bold text</strong></p>
    <p>_italic text_ == <em>italic text</em></p>
    <p>[a link](http://80000hours.org/) == <a href="http://80000hours.org">a link</a></p>
  </div>

  <div class="row">
    <div class="span7 offset1">
    <%= simple_form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put, :class => 'form-horizontal' }, :defaults=>{:input_html=>{:class=>'span4'}}  ) do |f| %>
      <%= devise_error_messages! %>

      <hr/>
      <div class="center">
      <h2>All data entered below will be publicy visible</h2>
      </div>
      <hr/>

      <%= f.fields_for :member, :defaults=>{:input_html=>{:class=>'span4'}}  do |mf| %>
        <%= mf.fields_for :eighty_thousand_hours_profile, :defaults=>{:input_html=>{:class=>'span4'}}  do |ep| %>
          <%= field_set_tag "Profile fields" do %>
            <%= f.input :name, :disabled => true, :required => false, :hint => "you can't change your name" %>
            <%= mf.input :location %>
            <%= ep.input :organisation, :label => "Your organization", :placeholder => "i.e. your current company or university" %>
            <%= ep.input :background,   :label => "What is your background and what are your interests?", :input_html => {:rows=>'10'}  %>
            <%= ep.input :inspiration,  :label => "What inspired you to join 80,000 Hours, and how has discovering 80,000 Hours changed your career decisions?", :input_html => {:rows=>'10'}  %>
            <%= ep.input :occupation,   :label => "What do you currently do?", :input_html => {:rows=>'10'}  %>
            <%= ep.input :career_plans, :label => "What are your plans for a high impact ethical career?", :input_html => {:rows=>'10'}  %>

            <label>What will be your main method(s) of doing good?</label>
            <div class="check-group">
              <%= ep.input :doing_good_inspiring,       :label => "Inspiring" %>
              <%= ep.input :doing_good_improving,       :label => "Improving" %>
              <%= ep.input :doing_good_philanthropy,    :label => "Philanthropy" %>
              <%= ep.input :doing_good_prophilanthropy, :label => "Professional philanthropy" %>
              <%= ep.input :doing_good_innovating,      :label => "Innovating" %>
              <%= ep.input :doing_good_research,        :label => "Research" %>
            </div>

            <%= ep.input :organisation_role, :label => "What is your role in the 80,000 Hours team?", :input_html => {:rows=>'5'}  %>
            <%= ep.input :interesting_fact,  :label => "Interesting fact (optional)", :input_html => {:rows=>'5'}  %>
            <%= mf.input :external_twitter,  :label => "Twitter page (optional)", :hint => "full URL e.g. http://twitter.com/JoeBloggs" %>
            <%= mf.input :external_facebook, :label => "Facebook page (optional)", :hint => "full URL e.g. http://www.facebook.com/JoeBloggs" %>
            <%= mf.input :external_linkedin, :label => "LinkedIn page (optional)", :hint => "full URL e.g. http://www.linkedin.com/in/JoeBloggs" %>


            <%= mf.label "Current profile picture" %>
              <% member = current_user.member %>
              <% if member.avatar? %>
                <%= link_to image_tag(member.avatar.url(:small), :class=>"shadow", :style=>"margin-left:20px;"), member.avatar.url %>
              <% else %>
                <%= image_tag("profiles/avatar_default_96x96.png", :class=>"shadow") %>
              <% end %>
              <%= mf.input :avatar, :label => "Change photo" %>
          <% end %>
        <% end %>
      <% end %>

      <%= field_set_tag "Change password" do %>
        <%= f.input :password, :label => "New password", :placeholder => "optional" %>
        <%= f.input :password_confirmation, :label => "New password confirmation", :placeholder => "optional" %>
      <% end %>

      <hr/>

      <%= f.input :current_password, :label => "Current password", :required => true, :placeholder => "required to update details" %>
      <div class="center">
        <div>
          <%= f.button :submit, "Save profile", :class=>'btn btn-success btn-large' %>
          <%= link_to "Cancel", user_path(current_user), :class=>'btn btn-large' %>
        </div>
      </div>
    <% end %>
  </div>
  </div>
  </div>
</div>
