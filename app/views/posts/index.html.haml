.blog
  #sidebar
    .grid_4
      .box
        <h2>Recommended Posts</h2>
        = markdown @recommended_posts.body
        - if can? :update, @recommended_posts
          .button
            = link_to 'Edit', edit_page_path(@recommended_posts)

      .box
        %h2
          Tags
        - tag_cloud(@tags, %w(tag_size1 tag_size2 tag_size3 tag_size4)) do |tag, css_class|
          =link_to tag.name, { :action => :tag, :id => tag.name }, :class => css_class

      .box
        <div id="popularthreads" class="dsq-widget">
        <h2 class="dsq-widget-title">Popular Posts</h2>
        <script type="text/javascript" src="http://80000hours.disqus.com/popular_threads_widget.js?num_items=3"></script>
        </div>
        <a href="http://disqus.com/">Powered by Disqus</a>
.blog
  - if @heading
    .grid_8
      .box
        .center
          %h1
            = @heading

  - @posts.each do |post|
    .grid_8
      .box
        .entry
          .title
            %a{:href => post_path(post)}
              = post.title
          .date= post.created_at.strftime("%B %d, %Y")

          .content
            = markdown post.get_teaser
  
            .read-more
              %a{:href => post_path(post)}
                Read more...
  
          .attribution= markdown post.attribution if post.attribution 

          - if post.tag_counts_on(:tags).size > 0
            .tags
              tags:
              - post.tag_counts_on(:tags).each do |tag| 
                =link_to tag.name, { :action => :tag, :id => tag.name }
  
          .comments
            %a{"href" => "#{post_url(post)}#disqus_thread",
               "data-disqus-identifier" => "blog-post-#{post.id}" }
            %div= render :partial => "disqus_count", :locals => { :post_id => post.id, :post_title => post.title }
  
          .fblike
            <fb:like href="#{post_url(post)}" send="false" width="450" show_faces="false"></fb:like>

  - if will_paginate @posts
    .grid_8
      .box
        .center.pagination
          = will_paginate @posts
