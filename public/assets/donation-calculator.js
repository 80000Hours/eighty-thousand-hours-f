$(document).ready(function(){if($("#donation-calculator").length){var e;function t(e){var t=e/10,n=12,r=12,i=60,s=document.getElementById("myCanvas");s.width=i*n,s.height=Math.ceil(t/i)*r;if(s.getContext){var o=s.getContext("2d");person=new Image,person.src="./images/person.png",person.onload=function(){var e=0,s=0;for(var u=0;u<t;u++)o.drawImage(person,n*e,r*s),e++,e>=i&&(s++,e=0)}}}function n(e){return e.toString().replace(/\B(?=(?:\d{3})+(?!\d))/g,",")}function r(e){var t=0,n=100,r=Math.log(1e4),i=Math.log(1e9),s=(i-r)/(n-t);return Math.exp(r+s*(e-t))}var s=3e4,o=1e5,u=40,a=[];function f(){for(i=0;i<u;i++)y0=s,y1=o,x0=0,x1=u,val=y0+i*(y1-y0)/u,noise=0,a[i]=[i,val+noise]}var l=30,c=[],h=[];function p(t){for(year=0;year<u;year++){var n=t[year][1];c[year]=n}e.series[0].setData(c)}function d(t){var n=[];for(year=0;year<u;year++)n[year]=t[year]*(100-l)/100,h[year]=t[year]*l/100;e.series[1].setData(n)}function v(){var e=0,t=0;for(year=0;year<h.length;year++)e+=h[year],t+=c[year]-h[year];t<0&&(t=0),moneyDonated_total=e.toFixed(0),moneyDonated_perDay=moneyDonated_total/(u*365),livesSaved_total=e/300,livesSaved_perDay=e/300/(u*365),$("#money_donated").html("£"+n(moneyDonated_total)),$("#net_money_total").html("£"+n(t.toFixed(0))),$("#lives_saved_total").html(livesSaved_total.toFixed(0)),$("#lives_saved_per_day").html(livesSaved_perDay.toFixed(2));var r="";livesSaved_perDay<=1.1?livesSaved_perDay<=0?r="You won't save any lives with your donations":(livesPerDay=(1/livesSaved_perDay).toFixed(0),r='You will save <span class="emphasise">a life every ',livesPerDay>1?r+=livesPerDay+" days":r+="day",r+="</span>!"):r='You will save <span class="emphasise">'+livesSaved_perDay.toFixed(1)+" lives</span> every day!",$("#lives_per_day").html(r)}function m(){l=$("#donation_slider").slider("value")}function g(){f(),p(a),d(c),v()}function y(e,t){s=t.value,$("#starting_salary_value").html("£"+n(t.value)),g()}function b(e){return flange=e/5e3,Math.round(flange)*5e3}function w(e,t){o=r(t.value).toFixed(0),o=b(o),$("#ending_salary_value").html("£"+n(o)),g()}function E(e,t){l=t.value,$("#donation_value").html(t.value+"%"),g()}$(function(){$("#starting_salary_slider").slider({range:"min",value:3e4,min:1e4,max:1e6,step:5e3,change:y,slide:y}),$("#starting_salary_value").html("£"+n($("#starting_salary_slider").slider("value"))),$("#ending_salary_slider").slider({range:"min",value:20,min:0,max:100,step:1,change:w,slide:w}),$("#ending_salary_value").html("£"+n(r($("#ending_salary_slider").slider("value")).toFixed(0))),$("#donation_slider").slider({range:"min",value:30,min:0,max:100,step:5,change:E,slide:E}),$("#donation_value").html($("#donation_slider").slider("value")+"%"),e=new Highcharts.Chart({chart:{renderTo:"chart-container",type:"area"},title:{text:""},xAxis:{title:{text:"years worked"}},yAxis:{title:{text:"salary: £ per year"}},plotOptions:{series:{enableMouseTracking:!1},area:{fillOpacity:0,opacity:0,marker:{enabled:!1,symbol:"circle",radius:2,states:{hover:{enabled:!0}}}}},series:[{name:"Donations",data:[],color:"#f30064",opacity:0},{name:"Remaining income",data:[],color:"#00ff00",opacity:0}]}),g()})}});